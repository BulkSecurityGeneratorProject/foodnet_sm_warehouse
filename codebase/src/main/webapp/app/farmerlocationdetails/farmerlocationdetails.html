
<form   name="farmerlocationdetailform" role="farmerlocationdetailform"  ng-submit="vm.updatelocationdetails()" show-validation>
    
      <center>     <h1 class="page-title" translate="farmer.location.headerval">Update Location Details</h1> </center>

        <center>   
            <div class="col-md-8 col-md-offset-2">

                <div class="alert alert-danger" ng-show="vm.errornotfound" translate="farmer.personaldetail.errornotfound">
                    <strong>Something Went Wrong ...</strong> Please try again later . 
                </div>
            </div>
        </center> 
    <body>
        <div class="row row-lg">	
            <div class="col-sm-4 col-md-4">
                <div class="form-group form-material floating">
                    <div class="form-group form-material">
                        <label class="control-label" for="place" translate="farmer.location.place">Enter Location</label>
                        <input type="text" class="form-control" id="autocomplete" name="place" ng-model="vm.place"   onFocus="geolocate()" />

                    </div>
                </div>  
            </div>
        </div>


        <div class="row row-lg">	
            <div class="col-sm-4 col-md-4">
                <div class="form-group form-material floating">
                    <div class="form-group form-material">
                        <label class="control-label" for="street_number" translate="farmer.location.houseno">House No.</label>
                        <input type="text" class="form-control" id="street_number" name="street_number" ng-model="vm.locationdetail.houseno"  required/>
                        <div ng-show="farmerlocationdetailform.street_number.$dirty && farmerlocationdetailform.street_number.$invalid">
                            <p class="help-block"
                               ng-show="farmerlocationdetailform.street_number.$error.required" translate="farmer.location.errorhouseno">
                                House No. is required.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-4 col-md-4">
                <div class="form-group form-material floating">
                    <div class="form-group form-material">
                        <label class="control-label" for="route" translate="farmer.location.route">Landmark</label>
                        <input type="text" class="form-control" id="route" name="route"   ng-model="vm.locationdetail.landmark" required/>
                        <div ng-show="farmerlocationdetailform.route.$dirty && farmerlocationdetailform.route.$invalid">
                            <p class="help-block"
                               ng-show="farmerlocationdetailform.route.$error.required" translate="farmer.location.errroroute">
                                Landmark is required.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-4 col-md-4">
                <div class="form-group form-material floating">
                    <div class="form-group form-material">
                        <label class="control-label" for="locality" translate="farmer.location.locality">locality</label>
                        <input type="text" class="form-control" id="locality" name="locality" ng-model="vm.locationdetail.city" required/>
                        <div ng-show="farmerlocationdetailform.locality.$dirty && farmerlocationdetailform.locality.$invalid">
                            <p class="help-block"
                               ng-show="farmerlocationdetailform.locality.$error.required" translate="farmer.location.errorlocality">
                                Locality is Required
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>	
        <div class="row row-lg">	
            <div class="col-sm-4 col-md-4">
                <div class="form-group form-material floating">
                    <div class="form-group form-material">
                        <label class="control-label" for="administrative_area_level_1" translate="farmer.location.state" >State</label>
                        <input type="text" class="form-control" id="administrative_area_level_1" name="administrative_area_level_1" ng-model="vm.locationdetail.state"  required/>
                        <div ng-show="farmerlocationdetailform.administrative_area_level_1.$dirty && farmerlocationdetailform.administrative_area_level_1.$invalid">
                            <p class="help-block"
                               ng-show="farmerlocationdetailform.administrative_area_level_1.$error.required" translate="farmer.location.errorstate">
                                City is Required.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-4 col-md-4">
                <div class="form-group form-material floating">
                    <div class="form-group form-material">
                        <label class="control-label" for="postal_code" translate="farmer.location.pin">PIN</label>
                        <input type="text" class="form-control" id="postal_code" name="postal_code"   ng-model="vm.locationdetail.pincode" required/>
                        <div ng-show="farmerlocationdetailform.postal_code.$dirty && farmerlocationdetailform.postal_code.$invalid">
                            <p class="help-block"
                               ng-show="farmerlocationdetailform.postal_code.$error.required" translate="farmer.location.errorpin">
                                PIN Code is Required.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-4 col-md-4">
                <div class="form-group form-material floating">
                    <div class="form-group form-material">
                        <label class="control-label" for="country" translate="farmer.location.country">country</label>
                        <input type="text" class="form-control" id="country" name="country" ng-model="vm.locationdetail.country" required/>
                        <div ng-show="farmerlocationdetailform.country.$dirty && farmerlocationdetailform.country.$invalid">
                            <p class="help-block"
                               ng-show="farmerlocationdetailform.country.$error.required" translate="farmer.location.errorcountry">
                                Country is Required
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>	
    <center> <button type="submit"  class="btn btn-primary" translate="farmer.personaldetail.submit">Submit Details</button></center> 
    <center> <div class="col-md-8 col-md-offset-2">
            <div class="alert alert-success" ng-show="vm.response" translate="farmer.personaldetail.success">
                <center>   <strong>Registration saved!</strong> </center>
            </div>

            <div class="alert alert-danger" ng-show="vm.error" translate="farmer.personaldetail.error">
                <strong>Registration failed!</strong> Please try again later. 
            </div>
        </div>
    </center>
</body>
{{vm.locationdetail.city}}
{{vm.locationdetail.state}}
{{vm.locationdetail.pincode}}

{{vm.googlePlace}}
</form>

<script>
    // This example displays an address form, using the autocomplete feature
    // of the Google Places API to help users fill in the information.

    // This example requires the Places library. Include the libraries=places
    // parameter when you first load the API. For example:
    // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">

    var placeSearch, autocomplete;

    var compgooglePlaceonentForm = {
        street_number: 'short_name',
        route: 'long_name',
        locality: 'long_name',
        administrative_area_level_1: 'short_name',
        country: 'long_name',
        postal_code: 'short_name'
    };
    

    function initAutocomplete() {
        // Create the autocomplete object, restricting the search to geographical
        // location types.
        autocomplete = new google.maps.places.Autocomplete(
                /** @type {!HTMLInputElement} */(document.getElementById('autocomplete')),
                {types: ['geocode']});

        // When the user selects an address from the dropdown, populate the address
        // fields in the form.
        autocomplete.addListener('place_changed', fillInAddress);
    }

    function fillInAddress() {
       
        // Get the place details from the autocomplete object.
        var place = autocomplete.getPlace();
        googlePlace=place;
        console.log("PLACE");
        console.log(googlePlace);
        
        for (var component in componentForm) {
            document.getElementById(component).value = '';
            document.getElementById(component).disabled = false;
        }

        // Get each component of the address from the place details
        // and fill the corresponding field on the form.
        for (var i = 0; i < place.address_components.length; i++) {
            var addressType = place.address_components[i].types[0];
            if (componentForm[addressType]) {
                var val = place.address_components[i][componentForm[addressType]];
                document.getElementById(addressType).value = val;
            }
        }
    }

    // Bias the autocomplete object to the user's geographical location,
    // as supplied by the browser's 'navigator.geolocation' object.
    function geolocate() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position) {
                var geolocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                var circle = new google.maps.Circle({
                    center: geolocation,
                    radius: position.coords.accuracy
                });
                autocomplete.setBounds(circle.getBounds());
            });
        }
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDM6V8VCuaZrxjq6Rg6Vhoht4tFtfTiTF4&libraries=places&callback=initAutocomplete"
async defer></script>
